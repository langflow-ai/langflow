---
title: Traceloop
slug: /integrations-instana-traceloop
description: Instrument Langflow with the Traceloop SDK and export traces and metrics to Instana using OpenTelemetry.
---

Traceloop SDK is a lightweight instrumentation toolkit designed for LLM (Large Language Model) applications. It enables developers to automatically capture and export traces, metrics, and key observability signals from their LLM-powered workflows.

When combined with Instana, the exported telemetry data from Traceloop provides end-to-end visibility, allowing users to visualize traces, analyze performance bottlenecks, and ensure reliable operation of LLM-driven applications.

This guide demonstrates how to integrate the Instana observability platform with your Langflow application using the Traceloop SDK so you can monitor and analyze LLM performance.

## Prerequisites

- Create a [Traceloop API key](https://app.traceloop.com/settings/api-key)
- Create an [Instana endpoint and Instana key](https://www.ibm.com/docs/en/instana-observability/1.0.302)
- [Install and start Langflow](/get-started-installation)

## Configure environment variables

1. In the root folder of your Langflow application, edit your existing Langflow `.env` file or create a new one.
Copy the script below into that file, then update the placeholder values with the details from your deployment.

   This integration uses the Traceloop SDK for instrumentation, which requires a Traceloop API key to initialize properly. If you don't have a Traceloop API key, then proceed with the dummy API key provided below.

   ```text
   TRACELOOP_API_KEY=tl_dummy_1234567890abcdef1234567890abcdef
   TRACELOOP_BASE_URL=<instana_endpoint>
   TRACELOOP_HEADERS="x-instana-key=<your_instana_key>"
   OTEL_EXPORTER_OTLP_INSECURE=false
   TRACELOOP_METRICS_ENDPOINT=<otel-dc-llm-host>:8000
   TRACELOOP_METRICS_ENABLED=true
   OTEL_METRIC_EXPORT_INTERVAL=10000
   ```

   Configure each environment variable according to your setup:

      - **TRACELOOP_API_KEY** - Your Traceloop API key that authenticates your application with Traceloop's monitoring service. Obtain this from your Traceloop account dashboard.

      - **TRACELOOP_BASE_URL** - The Instana endpoint URL for telemetry data collection. This should be your Instana backend endpoint, for example: `https://otlp-magenta-saas.instana.rocks:4318`. Find this in your Instana configuration or contact your Instana administrator.

      - **TRACELOOP_HEADERS** - Authentication headers for Instana data collection. Set this to `"x-instana-key=<your_instana_key>"` where the Instana key is provided by your Instana setup.

      - **OTEL_EXPORTER_OTLP_INSECURE** - Security setting for OpenTelemetry Protocol connections. Set to `false` for secure HTTPS/TLS connections (recommended for production Instana SaaS endpoints) or `true` for insecure HTTP connections during local development.

      - **TRACELOOP_METRICS_ENDPOINT** - Separate metrics endpoint configuration, typically set to `host.docker.internal:8000` for Docker environments. Adjust the host and port based on your deployment setup.

      - **TRACELOOP_METRICS_ENABLED** - Boolean flag to enable metrics collection. Set to `true` to activate metrics gathering.

      - **OTEL_METRIC_EXPORT_INTERVAL** - Interval in milliseconds for metrics export. Set to `10000` for 10-second export intervals, or adjust based on your monitoring requirements.

2. Make sure the OpenTelemetry Data Collector (OTel DC) is running and correctly set up.
Open your Collectorâ€™s `config.yaml` file, copy in the configuration shown below, and replace the placeholder values with the ones that match your setup or requirements.

    ```yaml
    llm.application: "LLM_DC"
    instances:
       -  otel.agentless.mode: true
          # Example endpoint: https://otlp-magenta-saas.instana.rocks:4318
          otel.backend.url: "<INSTANA_ENDPOINT>"
          otel.backend.using.http: false
          callback.interval: 10
          otel.service.name: "DC1"
          otel.service.port: 8000
          currency: "USD"
    ```

    This configuration enables the OTel Collector to operate in agentless mode and route telemetry data to your Instana backend with proper service identification and collection intervals for effective monitoring integration.

## Start Langflow with environment variables

Launch your Langflow application using the `.env` file:
```bash
uv run langflow run --env-file .env
```

Traceloop automatically begins monitoring and collecting telemetry data from your LLM applications.

## Verify the integration

To verify that observability is working correctly:

1. Run a flow in Langflow to generate traffic.
2. To view traces in Instana, open Instana and click **Applications**.
3. In **Services**, search for `Langflow`.
4. Click **Langflow** to view and analyze the associated calls.

![Instana Traces dashboard](/img/instana-traces-dashboard.png)

5. To view metrics in Instana, open Instana and click **Infrastructure**.
6. In **Analyze Infrastructure**, click **Otel LLMonitor**.
7. To view your Metrics dashboard, click `LLM:DC1@your_machine_name.local`.

![Instana Metrics dashboard](/img/instana-metrics-dashboard.png)

## See also

* [Traceloop documentation](https://www.traceloop.com/docs/introduction)
* [Instana setup documentation](https://www.ibm.com/docs/en/instana-observability/1.0.300?topic=started-instana-setup)
* [Otel DC setup documentation](https://www.ibm.com/docs/en/instana-observability/1.0.300?topic=started-install-otel-data-collector-llm-odcl)