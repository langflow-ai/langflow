from pydantic import BaseModel


class User(BaseModel):
    user_id: str
    name: str
    membership: str

def retrieve_user(userid: str) -> User:
    return User(
        user_id=userid,
        name="James Smith",
        membership="regular",
    )

from langchain_core.tools import StructuredTool

tool = StructuredTool.from_function(
        func=retrieve_user,
        # output_schema=User,
        # infer_schema=True,
        name="get_user",
        description="Get user by id",
        # return_direct=False,
    )
tool.metadata = {
    "output_schema": User.model_json_schema()
}
# tool.OutputType = lambda: User
# tool.tags = ["get_user"]

print("get_output_schema()")
s = tool.get_output_schema()
print(s.model_json_schema())

# print(tool.OutputType)

# print("get_output_jsonschema()" )
# print(tool.get_output_jsonschema())
