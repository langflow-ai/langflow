id: urn:agent:genesis:clinical_entity_extraction:1
name: Clinical Entity Extraction
fullyQualifiedName: genesis.autonomize.ai.clinical_entity_extraction
description: Navigate the Linguistic Landscape, Discover Opportunities. Extracts clinical entities from medical text including symptoms, conditions, medications, procedures, and lab values.
domain: autonomize.ai
subDomain: clinical-nlp
version: 1.4.3
environment: production
agentOwner: clinical-nlp@autonomize.ai
agentOwnerDisplayName: Clinical NLP Team
email: clinical-nlp@autonomize.ai
status: ACTIVE
variables:
- name: llm_provider
  type: string
  required: false
  default: Azure OpenAI
  description: LLM provider (AzureOpenAI, OpenAI, Anthropic, etc.)
- name: model_name
  type: string
  required: false
  default: gpt-4
  description: Model name to use for entity extraction
- name: temperature
  type: float
  required: false
  default: 0.1
  description: Temperature for model generation
- name: entity_types
  type: array
  required: false
  default:
  - problem
  - medication
  - procedure
  - lab
  - vital
  - symptom
  description: Types of clinical entities to extract
- name: include_negation
  type: boolean
  required: false
  default: true
  description: Detect negated entities (e.g., "no fever")
- name: include_temporal
  type: boolean
  required: false
  default: true
  description: Extract temporal information (onset, duration)
tags:
- chart-review
- clinical-nlp
- entity-extraction
- reusable
- healthcare
- nlp
kind: Single Agent
agentGoal: Extract and classify clinical entities from unstructured medical text including diagnoses, medications, procedures, lab values, and symptoms with temporal and contextual information
targetUser: internal
valueGeneration: ProcessAutomation
interactionMode: RequestResponse
runMode: RealTime
agencyLevel: KnowledgeDrivenWorkflow
toolsUse: true
learningCapability: None
reusability:
  asTools: true
  standalone: true
  provides:
    toolName: ClinicalEntityExtractor
    toolDescription: Extracts structured clinical entities from medical text
    inputSchema:
      type: object
      properties:
        text:
          type: string
          description: Clinical text to analyze (note, chart, report)
        entity_types:
          type: array
          items:
            type: string
          description: Specific entity types to extract (optional)
        include_context:
          type: boolean
          description: Include negation and temporal context
          default: true
        source_type:
          type: string
          enum:
          - clinical_note
          - radiology_report
          - lab_report
          - discharge_summary
          - progress_note
          description: Type of source document
      required:
      - text
    outputSchema:
      type: object
      properties:
        entities:
          type: array
          items:
            type: object
            properties:
              text:
                type: string
              category:
                type: string
              code:
                type: string
              coding_system:
                type: string
              negated:
                type: boolean
              temporal_info:
                type: object
              confidence:
                type: number
        entity_summary:
          type: object
          properties:
            total_entities:
              type: integer
            by_category:
              type: object
        metadata:
          type: object
  dependencies:
  - NLPEngine
  - MedicalOntology
sampleInput:
  text: "Patient presents with acute onset chest pain radiating to left arm. History of hypertension and type 2 diabetes mellitus. Currently on metformin 500mg BID and lisinopril 10mg daily. No known drug allergies. Denies shortness of breath. Troponin ordered."
  entity_types:
  - problem
  - medication
  - procedure
  - lab
  include_context: true
  source_type: clinical_note
promptConfiguration:
  basePromptId: clinical_entity_extraction_v1
  customPrompt: |
    You are a clinical NLP specialist. Your role is to:
    1. Extract clinical entities from medical text
    2. Classify entities into appropriate categories (problem, medication, procedure, lab, vital, symptom)
    3. Identify medical codes (ICD-10, RxNorm, CPT, LOINC)
    4. Detect negation (e.g., "no fever", "denies pain")
    5. Extract temporal information (onset, duration, frequency)
    6. Identify severity and status (acute, chronic, resolved)

    Entity Categories:
    - **Problem**: Diagnoses, conditions, diseases
    - **Medication**: Drugs, dosages, routes, frequencies
    - **Procedure**: Tests, surgeries, interventions
    - **Lab**: Laboratory tests and results
    - **Vital**: Vital signs (BP, HR, temp, etc.)
    - **Symptom**: Patient-reported symptoms

    For each entity, provide:
    1. Extracted text span
    2. Category
    3. Standardized medical code (if applicable)
    4. Coding system (ICD-10, RxNorm, CPT, LOINC, SNOMED)
    5. Negation status (affirmed/negated)
    6. Temporal context (acute/chronic, onset date)
    7. Confidence score (0-1)

    Provide clear, structured output suitable for clinical workflows.
components:
- id: input
  name: Clinical Text Input
  kind: Data
  type: genesis:chat_input
  description: Clinical text for entity extraction
  provides:
  - useAs: input
    in: entity-extraction-agent
    description: Raw clinical text
- id: extraction-prompt
  name: Entity Extraction Instructions
  kind: Prompt
  type: genesis:prompt_template
  description: Prompt template for clinical entity extraction
  config:
    saved_prompt: clinical_entity_extraction_prompt_v1
    template: |
      You are a clinical NLP specialist extracting entities from medical text.

      Extract and classify the following entity types:
      1. **Problems/Diagnoses**: Diseases, conditions, diagnoses
      2. **Medications**: Drug names, dosages, routes, frequencies
      3. **Procedures**: Tests, surgeries, interventions, examinations
      4. **Lab Tests**: Laboratory tests ordered or resulted
      5. **Vital Signs**: Blood pressure, heart rate, temperature, etc.
      6. **Symptoms**: Patient-reported symptoms and complaints

      For each entity, provide:
      - **Text**: The exact text span from the input
      - **Category**: The entity type
      - **Code**: Medical code (ICD-10, RxNorm, CPT, LOINC, SNOMED)
      - **Coding System**: The coding system used
      - **Negated**: True if negated (e.g., "no fever", "denies")
      - **Temporal**: Onset, duration, frequency information
      - **Status**: acute, chronic, resolved, or current
      - **Confidence**: Your confidence in the extraction (0-1)

      Examples:
      - "History of hypertension" → Problem: Hypertension (ICD-10: I10), Status: chronic
      - "Denies chest pain" → Symptom: chest pain, Negated: true
      - "Metformin 500mg BID" → Medication: Metformin (RxNorm), Dose: 500mg, Frequency: BID

      Return structured JSON output with all extracted entities.
  provides:
  - useAs: system_prompt
    in: entity-extraction-agent
    description: Extraction guidelines
- id: entity-extraction-agent
  name: Clinical Entity Extraction Agent
  kind: Agent
  type: genesis:agent
  description: Extracts and classifies clinical entities
  config:
    agent_llm: Azure OpenAI
    model_name: gpt-4
    temperature: 0.1
    max_tokens: 3000
    structured_output: true
    handle_parsing_errors: true
    max_iterations: 5
    verbose: true
  provides:
  - useAs: input
    in: entity-formatter
    description: Extracted entities
- id: medical-ontology
  name: Medical Ontology Tool
  kind: Tool
  type: genesis:mcp_tool
  description: Map entities to standard medical codes via MCP
  asTools: true
  config:
    tool_name: medical_ontology
    description: Map clinical terms to ICD-10, RxNorm, CPT, LOINC, SNOMED codes
    supported_systems:
    - ICD-10
    - RxNorm
    - CPT
    - LOINC
    - SNOMED-CT
  provides:
  - useAs: tools
    in: entity-extraction-agent
    description: Code mapping tool
- id: negation-detector
  name: Negation Detection Tool
  kind: Tool
  type: genesis:mcp_tool
  description: Detect negated entities via MCP
  asTools: true
  config:
    tool_name: negation_detector
    description: Identify negated clinical findings (e.g., "no fever", "denies")
  provides:
  - useAs: tools
    in: entity-extraction-agent
    description: Negation detection
- id: temporal-extractor
  name: Temporal Information Extractor
  kind: Tool
  type: genesis:mcp_tool
  description: Extract temporal context via MCP
  asTools: true
  config:
    tool_name: temporal_extractor
    description: Extract onset, duration, and frequency information
  provides:
  - useAs: tools
    in: entity-extraction-agent
    description: Temporal extraction
- id: entity-formatter
  name: Entity Output
  kind: Data
  type: genesis:chat_output
  description: Structured entity extraction results
  config:
    should_store_message: true
    format: json
outputs:
- extracted_entities
- entity_summary
- coded_entities
- negated_entities
- temporal_annotations
kpis:
- name: Entity Extraction Accuracy
  category: Quality
  valueType: percentage
  target: 95
  unit: '%'
  description: Accuracy of entity extraction vs. expert annotation
- name: Coding Accuracy
  category: Quality
  valueType: percentage
  target: 92
  unit: '%'
  description: Accuracy of medical code assignment
- name: Processing Time Per Note
  category: Performance
  valueType: numeric
  target: 3000
  unit: ms
  description: Average time to process a clinical note
- name: Negation Detection Accuracy
  category: Quality
  valueType: percentage
  target: 94
  unit: '%'
  description: Accuracy of negation detection
- name: Entity Coverage
  category: Quality
  valueType: percentage
  target: 96
  unit: '%'
  description: Percentage of actual entities detected
securityInfo:
  visibility: Private
  confidentiality: High
  gdprSensitive: true
  phiData: true
