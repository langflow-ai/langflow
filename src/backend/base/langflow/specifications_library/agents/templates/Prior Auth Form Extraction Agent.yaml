id: urn:agent:prior-auth-form-extraction-agent:1
name: Prior Auth Form Extraction Agent
fullyQualifiedName: genesis.autonomize.ai.prior_auth_form_extraction
description: Extracts structured data from prior authorization forms using vision and document processing capabilities
domain: autonomize.ai
subDomain: document-processing
version: 1.0.0
environment: production
agentOwner: document-processing@autonomize.ai
agentOwnerDisplayName: Document Processing Team
email: document-processing@autonomize.ai
status: ACTIVE
variables:
- name: llm_provider
  type: string
  required: false
  default: Azure OpenAI
  description: LLM provider (AzureOpenAI, OpenAI, Anthropic, etc.)
- name: model_name
  type: string
  required: false
  default: gpt-4-vision
  description: Model name to use for vision and extraction
- name: temperature
  type: float
  required: false
  default: 0.1
  description: Temperature for model generation
- name: extraction_confidence_threshold
  type: float
  required: false
  default: 0.85
  description: Minimum confidence threshold for extracted fields
- name: enable_srf_identification
  type: boolean
  required: false
  default: true
  description: Enable service request form identification
tags:
- prior-auth
- document-extraction
- form-processing
- reusable
- healthcare
- vision
kind: Single Agent
agentGoal: Extract and structure data from prior authorization forms including member information, service details, diagnosis codes, and authorization requests
targetUser: internal
valueGeneration: ProcessAutomation
interactionMode: RequestResponse
runMode: RealTime
agencyLevel: KnowledgeDrivenWorkflow
toolsUse: true
learningCapability: None
reusability:
  asTools: true
  standalone: true
  provides:
    toolName: PriorAuthFormExtractor
    toolDescription: Extracts structured data from prior authorization PDF forms
    inputSchema:
      type: object
      properties:
        file_path:
          type: string
          description: Path to prior auth form (PDF or image)
        form_type:
          type: string
          description: Type of form (SRF, CMS-1500, UB-04, etc.)
          enum:
          - SRF
          - CMS-1500
          - UB-04
          - Custom
        extract_fields:
          type: array
          items:
            type: string
          description: Specific fields to extract (optional)
      required:
      - file_path
    outputSchema:
      type: object
      properties:
        member_info:
          type: object
          properties:
            member_id:
              type: string
            member_name:
              type: string
            date_of_birth:
              type: string
            insurance_id:
              type: string
        service_info:
          type: object
          properties:
            service_codes:
              type: array
              items:
                type: string
            diagnosis_codes:
              type: array
              items:
                type: string
            service_dates:
              type: object
            units_requested:
              type: number
        provider_info:
          type: object
          properties:
            provider_name:
              type: string
            provider_npi:
              type: string
            provider_taxonomy:
              type: string
        extraction_metadata:
          type: object
          properties:
            confidence_scores:
              type: object
            form_type_detected:
              type: string
            processing_time_ms:
              type: number
  dependencies:
  - BlobStorage
  - ImageProcessing
sampleInput:
  file_path: /blob/prior-auth-forms/PA_20240315_001.pdf
  form_type: SRF
  extract_fields:
  - member_id
  - service_code
  - diagnosis_codes
  - provider_npi
  - units_requested
promptConfiguration:
  basePromptId: prior_auth_form_extraction_v1
  customPrompt: |
    You are a medical document extraction specialist. Your role is to:
    1. Identify the type of prior authorization form
    2. Extract member demographic information
    3. Identify requested services and CPT/HCPCS codes
    4. Extract diagnosis codes (ICD-10)
    5. Capture provider information and NPI
    6. Extract authorization details (units, dates, etc.)

    Provide high-confidence extractions with field-level confidence scores.
    Flag any unclear or ambiguous fields for human review.
components:
- id: input
  name: Form Input
  kind: Data
  type: genesis:blob_storage
  description: Prior authorization form file (PDF or image)
  provides:
  - useAs: input
    in: form-splitter
    description: Form file path
- id: form-splitter
  name: Split Into Images
  kind: Tool
  type: genesis:split_into_images
  description: Convert PDF pages to individual images
  config:
    output_format: png
    dpi: 300
    preserve_aspect_ratio: true
  provides:
  - useAs: input
    in: srf-identifier
    description: Page images
- id: srf-identifier
  name: SRF Identification
  kind: Agent
  type: genesis:srf_identification
  description: Identify service request form pages
  config:
    model_name: gpt-4-vision
    confidence_threshold: 0.85
  provides:
  - useAs: input
    in: form-filter
    description: Identified SRF pages
- id: form-filter
  name: Filter SRF Pages
  kind: Tool
  type: genesis:json_array_filter
  description: Filter to keep only identified SRF pages
  config:
    filter_field: is_srf
    filter_value: true
  provides:
  - useAs: input
    in: srf-extractor
    description: Filtered SRF pages
- id: extraction-prompt
  name: Extraction Instructions
  kind: Prompt
  type: genesis:prompt
  description: Prompt template for form extraction
  config:
    saved_prompt: srf_extraction_prompt_v1
    template: |
      You are extracting data from a prior authorization service request form.

      Extract the following information with high accuracy:

      **Member Information:**
      - Member ID / Subscriber ID
      - Member Name (Last, First, MI)
      - Date of Birth
      - Insurance/Group ID

      **Service Request:**
      - CPT/HCPCS Codes
      - ICD-10 Diagnosis Codes
      - Service Description
      - Units Requested
      - Service Start/End Dates
      - Place of Service

      **Provider Information:**
      - Requesting Provider Name
      - Provider NPI
      - Provider Taxonomy
      - Contact Information

      **Authorization Details:**
      - Authorization Type (Initial/Extension/Retro)
      - Clinical Justification
      - Supporting Documentation References

      For each field, provide:
      1. Extracted value
      2. Confidence score (0-1)
      3. Location on form (if applicable)

      Flag any missing or unclear fields for review.
  provides:
  - useAs: system_prompt
    in: srf-extractor
    description: Extraction instructions
- id: srf-extractor
  name: SRF Data Extraction
  kind: Agent
  type: genesis:srf_extraction
  description: Extract structured data from SRF forms
  config:
    agent_llm: Azure OpenAI
    model_name: gpt-4-vision
    temperature: 0.1
    max_tokens: 3000
    structured_output: true
    confidence_scoring: true
  provides:
  - useAs: input
    in: output
    description: Extracted form data
- id: output
  name: Extraction Results
  kind: Data
  type: genesis:json_output
  description: Structured extraction results with confidence scores
  config:
    should_store_message: true
    include_metadata: true
outputs:
- extracted_member_info
- extracted_service_codes
- extracted_diagnosis_codes
- extracted_provider_info
- extraction_confidence_scores
- fields_requiring_review
kpis:
- name: Extraction Accuracy
  category: Quality
  valueType: percentage
  target: 98
  unit: '%'
  description: Accuracy of extracted fields vs. manual review
- name: Processing Time Per Form
  category: Performance
  valueType: numeric
  target: 5000
  unit: ms
  description: Average time to process a complete form
- name: Field Coverage
  category: Quality
  valueType: percentage
  target: 95
  unit: '%'
  description: Percentage of required fields successfully extracted
- name: Confidence Score Average
  category: Quality
  valueType: numeric
  target: 0.9
  unit: score
  description: Average confidence score across all extractions
- name: Forms Requiring Manual Review
  category: Efficiency
  valueType: percentage
  target: 10
  unit: '%'
  description: Percentage of forms flagged for human review
securityInfo:
  visibility: Private
  confidentiality: High
  gdprSensitive: true
  phiData: true
