id: urn:agent:genesis:patient_experience:post_visit_qa:1
name: Post-Visit Q&A Agent
fullyQualifiedName: genesis.autonomize.ai.post_visit_qa
description: Uses discharge summaries, physician notes, and medication records to answer patient questions after a visit, supporting better adherence and satisfaction
domain: autonomize.ai
subDomain: patient-experience
version: 1.0.0
environment: production
agentOwner: patient-experience@autonomize.ai
agentOwnerDisplayName: Patient Experience Team
email: patient-experience@autonomize.ai
status: ACTIVE

variables:
- name: llm_provider
  type: string
  required: false
  default: Azure OpenAI
  description: LLM provider (AzureOpenAI, OpenAI, Anthropic, etc.)
- name: model_name
  type: string
  required: false
  default: gpt-4
  description: Model name to use for patient communication
- name: temperature
  type: float
  required: false
  default: 0.2
  description: Temperature for balanced accuracy and empathy
- name: max_response_length
  type: integer
  required: false
  default: 500
  description: Maximum response length for patient-friendly answers
- name: include_medication_interactions
  type: boolean
  required: false
  default: true
  description: Include medication interaction warnings

tags:
- patient-experience
- post-visit
- qa
- healthcare
- patient-adherence
- patient-satisfaction

kind: Single Agent
agentGoal: Answer patient questions after medical visits using visit documentation to improve adherence and satisfaction while reducing follow-up calls
targetUser: external
valueGeneration: PatientExperience
interactionMode: RequestResponse
runMode: RealTime
agencyLevel: KnowledgeDrivenWorkflow
toolsUse: true
learningCapability: None

reusability:
  asTools: true
  standalone: true
  provides:
    toolName: PostVisitQAAgent
    toolDescription: Answers patient questions using visit documentation
    inputSchema:
      type: object
      properties:
        patient_id:
          type: string
          description: Patient identifier
        visit_id:
          type: string
          description: Visit identifier
        question:
          type: string
          description: Patient question
        visit_date:
          type: string
          description: Date of visit (YYYY-MM-DD)
      required:
      - patient_id
      - question
    outputSchema:
      type: object
      properties:
        answer:
          type: string
          description: Patient-friendly answer
        sources:
          type: array
          description: Referenced documentation
        confidence:
          type: number
          description: Confidence in answer
        follow_up_recommended:
          type: boolean
          description: Whether patient should contact provider

sampleInput:
  patient_id: P123456789
  visit_id: V789012345
  question: "When should I take my new blood pressure medication?"
  visit_date: '2024-03-15'
  additional_context: "Patient seems confused about timing and had concerns about side effects during visit"

promptConfiguration:
  basePromptId: post_visit_qa_v1
  customPrompt: 'You are a compassionate healthcare communication specialist helping patients understand their visit and care instructions.

    Your role is to:
    1. Answer patient questions using their specific visit documentation
    2. Provide clear, patient-friendly explanations
    3. Reference relevant medication instructions and care plans
    4. Encourage adherence while being empathetic
    5. Identify when patients should contact their provider

    Communication guidelines:
    - Use simple, non-medical language
    - Be warm and empathetic
    - Provide specific, actionable information
    - Reference their actual visit and medications
    - Encourage questions and follow-up when appropriate

    Always base answers on the patient''s actual visit documentation and medication records.
    '

components:
- id: input
  name: Patient Question
  kind: Data
  type: genesis:chat_input
  description: Patient question about their recent visit
  provides:
  - useAs: input
    in: qa-agent
    description: Patient inquiry

- id: qa-prompt
  name: Healthcare Communication Guidelines
  kind: Prompt
  type: genesis:prompt_template
  description: Specialized prompt for patient communication
  config:
    saved_prompt: post_visit_qa_prompt_v1
    template: 'You are a compassionate healthcare communication specialist helping patients understand their visit and care instructions.

      Your responsibilities:
      1. Answer patient questions using their specific visit documentation
      2. Provide clear, patient-friendly explanations in simple language
      3. Reference relevant medication instructions, dosages, and timing
      4. Address care plan instructions and follow-up requirements
      5. Encourage medication adherence while being empathetic
      6. Identify when patients should contact their provider immediately

      Communication standards:
      - Use 6th-grade reading level language
      - Avoid medical jargon; explain necessary terms
      - Be warm, empathetic, and encouraging
      - Provide specific, actionable information
      - Reference their actual visit notes and prescriptions
      - Include timing, dosage, and administration instructions
      - Mention potential side effects they discussed with provider
      - Encourage questions and clarification

      Data sources available:
      - Visit notes and discharge summaries
      - Medication records and prescription details
      - Care plan instructions
      - Clinical guidelines for patient education

      Response format:
      - Direct answer to their question
      - Relevant details from their visit
      - Clear action steps
      - When to contact provider
      - Confidence level in answer

      Always prioritize patient safety and encourage provider contact for urgent concerns.'
  provides:
  - useAs: system_prompt
    in: qa-agent
    description: Provide communication guidelines

- id: ehr-access
  name: Electronic Health Record Access
  kind: Tool
  type: genesis:mcp_tool
  description: Access patient visit notes, discharge summaries, and care plans
  asTools: true
  config:
    tool_name: ehr_patient_records
    description: |
      Access patient's electronic health records for the specific visit.

      Use this tool to retrieve:
      - Visit notes and provider observations
      - Discharge summaries and instructions
      - Care plan recommendations
      - Follow-up appointments scheduled
      - Patient education materials provided

      Required: patient_id and visit_id
      Returns: Comprehensive visit documentation relevant to patient questions
    include_visit_notes: true
    include_discharge_summary: true
    include_care_plans: true
    patient_privacy_compliant: true
  provides:
  - useAs: tools
    in: qa-agent
    description: Provide access to visit documentation

- id: medication-database
  name: Medication Information System
  kind: Tool
  type: genesis:mcp_tool
  description: Access detailed medication information and patient-specific prescriptions
  asTools: true
  config:
    tool_name: medication_records
    description: |
      Access detailed medication information for patient questions.

      Provides:
      - Current prescriptions from the visit
      - Medication instructions and dosages
      - Administration timing and methods
      - Potential side effects discussed
      - Drug interaction warnings
      - Patient-specific contraindications

      Use when patients ask about:
      - Medication timing or dosage
      - Side effects or interactions
      - How to take medications
      - Changes to existing medications
    include_interactions: true
    include_patient_education: true
    include_administration_instructions: true
  provides:
  - useAs: tools
    in: qa-agent
    description: Provide medication information access

- id: clinical-guidelines
  name: Patient Education Guidelines
  kind: Tool
  type: genesis:knowledge_hub_search
  description: Access clinical guidelines and patient education materials
  asTools: true
  config:
    search_scope: patient_education
    max_results: 5
    include_patient_handouts: true
    reading_level_filter: patient_appropriate
  provides:
  - useAs: tools
    in: qa-agent
    description: Provide educational content and guidelines

- id: qa-agent
  name: Post-Visit Q&A Agent
  kind: Agent
  type: genesis:agent
  description: Answers patient questions using visit documentation
  config:
    agent_llm: Azure OpenAI
    model_name: gpt-4
    temperature: 0.2
    max_tokens: 500
    handle_parsing_errors: true
    max_iterations: 5
    verbose: false
  provides:
  - useAs: input
    in: patient-response
    description: Provide patient-friendly answer

- id: patient-response
  name: Patient Answer
  kind: Data
  type: genesis:chat_output
  description: Clear, empathetic answer to patient question
  config:
    should_store_message: true
    include_sources: true

outputs:
- patient_answer
- visit_references
- medication_guidance
- follow_up_recommendations
- adherence_support

kpis:
- name: Response Accuracy
  category: Quality
  valueType: percentage
  target: 95
  unit: '%'
  description: Accuracy of responses based on visit documentation
- name: Patient Satisfaction Score
  category: Quality
  valueType: numeric
  target: 4.5
  unit: score
  description: Patient satisfaction with answers (1-5 scale)
- name: Response Time
  category: Performance
  valueType: numeric
  target: 3000
  unit: ms
  description: Time to provide complete answer
- name: Follow-up Call Reduction
  category: Efficiency
  valueType: percentage
  target: 30
  unit: '%'
  description: Reduction in follow-up calls after agent interaction
- name: Medication Adherence Impact
  category: Outcome
  valueType: percentage
  target: 20
  unit: '%'
  description: Improvement in medication adherence rates
- name: Documentation Coverage
  category: Quality
  valueType: percentage
  target: 98
  unit: '%'
  description: Percentage of answers successfully referencing visit docs

securityInfo:
  visibility: Private
  confidentiality: High
  gdprSensitive: true
  hipaaCompliant: true
  patientDataAccess: true