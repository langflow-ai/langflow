id: urn:agent:genesis:provider-enablement:clinical-documentation-scribe:1.0.0
name: Clinical Documentation Scribe Agent
fullyQualifiedName: genesis.autonomize.ai.clinical-documentation-scribe
description: Converts real-time audio transcripts or visit recordings into structured clinical notes using AI-powered speech recognition, NLP, and EHR integration
domain: autonomize.ai
subDomain: provider-enablement
version: 1.0.0
environment: production
agentOwner: provider-enablement@autonomize.ai
agentOwnerDisplayName: Provider Enablement Team
email: provider-enablement@autonomize.ai
status: ACTIVE

variables:
- name: transcription_language
  type: string
  required: false
  default: "en"
  description: Language code for audio transcription (e.g., en, es, fr)
- name: audio_quality_enhancement
  type: boolean
  required: false
  default: true
  description: Enable audio quality enhancement for better transcription accuracy
- name: speaker_diarization
  type: boolean
  required: false
  default: true
  description: Enable speaker identification in multi-speaker conversations
- name: medical_terminology_boost
  type: boolean
  required: false
  default: true
  description: Enable medical terminology recognition boost
- name: ehr_template_type
  type: string
  required: false
  default: "SOAP"
  description: Clinical note template format (SOAP, DAP, POMR, GIRP)
- name: compliance_mode
  type: string
  required: false
  default: "HIPAA"
  description: Compliance mode for data handling (HIPAA, GDPR, SOC2)

tags:
- provider-enablement
- clinical-documentation
- audio-transcription
- speech-recognition
- nlp
- ehr-integration
- healthcare
- compliance

reusability:
  asTools: false

sampleInput:
  audio_file_path: "/uploads/visit_recording_20241115.wav"
  provider_id: "PRV123456"
  patient_id: "PAT789012"
  visit_type: "consultation"
  speciality: "cardiology"

sampleOutput:
  transcription_id: "TXN_20241115_001"
  structured_note: |
    SUBJECTIVE:
    Patient reports chest pain for the past 3 days, described as sharp, intermittent, worse with deep breathing.

    OBJECTIVE:
    Vital signs: BP 140/90, HR 82, RR 16, O2 sat 98% on room air
    Physical exam: Heart rate regular, no murmurs, lungs clear bilaterally

    ASSESSMENT:
    Chest pain, likely musculoskeletal in origin. Rule out cardiac etiology.

    PLAN:
    1. ECG ordered
    2. Chest X-ray ordered
    3. Follow up in 1 week or sooner if symptoms worsen
  confidence_score: 0.94
  processing_time_seconds: 8.2
  ehr_integration_status: "success"

kind: Single Agent
agentGoal: Convert audio recordings of clinical encounters into accurate, structured clinical documentation with seamless EHR integration while maintaining HIPAA compliance
targetUser: internal
valueGeneration: ProcessAutomation
interactionMode: RequestResponse
runMode: RealTime
agencyLevel: ReflexiveAgent
toolsUse: true
learningCapability: Supervised

components:
- id: audio-input
  name: Audio File Input
  kind: Input
  type: genesis:chat_input
  description: Receive audio file or recording for transcription processing
  provides:
  - useAs: input_value
    in: transcription-agent
    description: Provide audio input for transcription processing

- id: audio-transcription-tool
  name: Audio Transcription Service
  kind: Tool
  type: genesis:audio_transcription
  description: Convert audio recordings to text using AssemblyAI speech recognition
  asTools: true
  config:
    language_detection: true
    speaker_labels: true
    auto_punctuation: true
    dual_channel: false
    speech_model: "best"
    language_code: "{transcription_language}"
    audio_intelligence: true
    sentiment_analysis: true
    entity_detection: true
    iab_categories: false
    content_safety: true
    custom_spelling: [
      {"from": "covid", "to": "COVID-19"},
      {"from": "bp", "to": "blood pressure"},
      {"from": "hr", "to": "heart rate"},
      {"from": "o2", "to": "oxygen"}
    ]
  provides:
  - useAs: tools
    in: transcription-agent
    description: Enable audio-to-text transcription capabilities

- id: transcription-polling-tool
  name: Transcription Status Polling
  kind: Tool
  type: genesis:transcription_poll
  description: Monitor transcription job status and retrieve completed results
  asTools: true
  config:
    polling_interval: 2
    max_wait_time: 300
    auto_retry: true
  provides:
  - useAs: tools
    in: transcription-agent
    description: Enable transcription job status monitoring

- id: medical-nlp-tool
  name: Medical NLP Processing
  kind: Tool
  type: genesis:transcription_lemur
  description: Extract medical entities and structure clinical content using AssemblyAI LeMUR
  asTools: true
  config:
    context: |
      You are a medical documentation AI assistant. Your task is to process clinical transcripts and extract structured medical information including:
      - Chief complaint and history of present illness
      - Review of systems
      - Physical examination findings
      - Assessment and diagnosis
      - Treatment plan and recommendations
      - Medications prescribed or reviewed
      - Follow-up instructions
    final_model: "anthropic/claude-3-5-sonnet"
    max_output_size: 4000
    temperature: 0.1
  provides:
  - useAs: tools
    in: transcription-agent
    description: Enable medical NLP processing for structured extraction

- id: ehr-integration-tool
  name: EHR Integration Service
  kind: Tool
  type: genesis:mcp_tool
  description: Integrate structured clinical notes with EHR systems via HL7 FHIR
  asTools: true
  config:
    tool_name: ehr_clinical_notes
    description: |
      Integration service for electronic health record systems to store structured clinical notes.
      Supports:
      - HL7 FHIR R4 standard for clinical document exchange
      - Multiple EHR systems (Epic, Cerner, AllScripts, athenahealth)
      - Structured note templates (SOAP, DAP, POMR, GIRP)
      - Provider and patient matching validation
      - Automated note routing and approval workflows
      - Audit trail and compliance logging
  provides:
  - useAs: tools
    in: transcription-agent
    description: Enable EHR system integration

- id: compliance-audit-tool
  name: Compliance and Audit Logger
  kind: Tool
  type: genesis:mcp_tool
  description: Log all transcription activities for HIPAA compliance and audit trails
  asTools: true
  config:
    tool_name: compliance_audit_logger
    description: |
      Comprehensive compliance and audit logging for clinical documentation activities.
      Features:
      - HIPAA-compliant access logging and data handling
      - User authentication and authorization tracking
      - Data encryption and secure transmission logging
      - Audit trail for all transcription and documentation activities
      - Compliance reporting and violation detection
      - Data retention policy enforcement
      - Patient consent and authorization management
  provides:
  - useAs: tools
    in: transcription-agent
    description: Enable compliance monitoring and audit logging

- id: quality-assurance-tool
  name: Quality Assurance Validator
  kind: Tool
  type: genesis:mcp_tool
  description: Validate transcription accuracy and clinical note quality metrics
  asTools: true
  config:
    tool_name: transcription_qa_validator
    description: |
      Quality assurance system for validating transcription accuracy and clinical documentation quality.
      Capabilities:
      - Transcription accuracy scoring and confidence metrics
      - Medical terminology validation against clinical vocabularies
      - Clinical note completeness assessment
      - Error detection and correction suggestions
      - Provider feedback collection and analysis
      - Continuous improvement recommendations
      - Performance benchmarking and reporting
  provides:
  - useAs: tools
    in: transcription-agent
    description: Enable quality assurance and validation

- id: transcription-agent
  name: Clinical Documentation Scribe
  kind: Agent
  type: genesis:agent
  description: Main agent orchestrating audio transcription, NLP processing, and EHR integration
  config:
    system_prompt: |
      You are a Clinical Documentation Scribe Agent specialized in converting audio recordings of clinical encounters into structured, accurate clinical notes.

      Your responsibilities include:
      1. Processing audio files through speech recognition systems
      2. Extracting and structuring medical information using NLP
      3. Formatting notes according to clinical documentation standards
      4. Ensuring HIPAA compliance and data security
      5. Integrating completed notes with EHR systems
      6. Maintaining audit trails and quality metrics

      Key requirements:
      - Maintain highest accuracy in medical terminology transcription
      - Follow clinical documentation best practices and templates
      - Ensure patient privacy and data security at all times
      - Provide clear confidence scores and quality metrics
      - Enable seamless EHR integration with proper formatting
      - Support multiple clinical note formats (SOAP, DAP, POMR, GIRP)

      When processing clinical encounters:
      1. First, process the audio through transcription services
      2. Apply medical NLP to extract structured information
      3. Format according to specified clinical template
      4. Validate accuracy and completeness
      5. Log all activities for compliance and audit
      6. Integrate with EHR system with proper metadata
      7. Provide summary with confidence scores and processing metrics

      Always prioritize accuracy, compliance, and provider workflow efficiency.
    model_name: "gpt-4"
    temperature: 0.1
    max_tokens: 4000
    top_p: 0.9
  provides:
  - useAs: input_value
    in: clinical-output
    from: response
    description: Provide processed clinical documentation

- id: clinical-output
  name: Clinical Documentation Output
  kind: Output
  type: genesis:chat_output
  description: Present structured clinical notes and transcription results
  provides: []

outputs:
- name: structured_clinical_note
  type: object
  description: Structured clinical note in specified format (SOAP, DAP, etc.)
- name: transcription_metadata
  type: object
  description: Transcription quality metrics, confidence scores, and processing details
- name: ehr_integration_status
  type: object
  description: EHR integration results and confirmation details
- name: compliance_audit_log
  type: object
  description: Compliance and audit trail information
- name: quality_metrics
  type: object
  description: Quality assurance scores and validation results

kpis:
- name: Transcription Accuracy
  description: Percentage accuracy of speech-to-text conversion
  target: "> 95%"
  measurement: percentage
- name: EHR Integration Success Rate
  description: Percentage of notes successfully integrated with EHR systems
  target: "> 98%"
  measurement: percentage
- name: Processing Time
  description: Average time to convert audio to structured note
  target: "< 30 seconds"
  measurement: seconds
- name: Clinical Note Completeness
  description: Percentage of notes meeting clinical documentation standards
  target: "> 90%"
  measurement: percentage
- name: Provider Satisfaction
  description: Provider satisfaction with documentation quality and workflow
  target: "> 4.5/5"
  measurement: rating
- name: Compliance Rate
  description: Percentage compliance with healthcare regulations (HIPAA)
  target: "100%"
  measurement: percentage

securityInfo:
  visibility: internal
  confidentialityLevel: high
  gdprSensitive: true
  complianceRequirements: ["HIPAA", "SOC2", "HITECH", "FDA-21CFR11"]