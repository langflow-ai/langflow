<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-getting-started/rag-with-astradb" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.4.0">
<title data-rh="true">ðŸŒŸ RAG with Astra DB | Langflow Documentation</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://langflow-ai.github.io/getting-started/rag-with-astradb"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="ðŸŒŸ RAG with Astra DB | Langflow Documentation"><meta data-rh="true" name="description" content="This page may contain outdated information. It will be updated as soon as possible."><meta data-rh="true" property="og:description" content="This page may contain outdated information. It will be updated as soon as possible."><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://langflow-ai.github.io/getting-started/rag-with-astradb"><link data-rh="true" rel="alternate" href="https://langflow-ai.github.io/getting-started/rag-with-astradb" hreflang="en"><link data-rh="true" rel="alternate" href="https://langflow-ai.github.io/getting-started/rag-with-astradb" hreflang="x-default"><link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-XHC7G628ZP"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-XHC7G628ZP",{anonymize_ip:!0})</script><link rel="stylesheet" href="/assets/css/styles.26f490fe.css">
<script src="/assets/js/runtime~main.ac02678d.js" defer="defer"></script>
<script src="/assets/js/main.1c7e2c61.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();null!==e?t(e):window.matchMedia("(prefers-color-scheme: dark)").matches?t("dark"):(window.matchMedia("(prefers-color-scheme: light)").matches,t("light"))}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top navbarHideable_m1mJ"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/chain.png" alt="Langflow" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/chain.png" alt="Langflow" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">Langflow</b></a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/langflow-ai/langflow" target="_blank" class="navbar__item navbar__link header-github-link"></a><a href="https://twitter.com/langflow_ai" target="_blank" class="navbar__item navbar__link header-twitter-link"></a><a href="https://discord.gg/EqksyE2EX9" target="_blank" class="navbar__item navbar__link header-discord-link"></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><main class="docMainContainer_TBSr docMainContainerEnhanced_lQrH"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>ðŸŒŸ RAG with Astra DB</h1>
<div class="theme-admonition theme-admonition-warning admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>warning</div><div class="admonitionContent_BuS1"><p>This page may contain outdated information. It will be updated as soon as possible.</p></div></div>
<p>This guide will walk you through how to build a RAG (Retrieval Augmented Generation) application using <strong>Astra DB</strong> and <strong>Langflow</strong>.</p>
<p><a href="https://www.datastax.com/products/datastax-astra?utm_source=langflow-pre-release&amp;utm_medium=referral&amp;utm_campaign=langflow-announcement&amp;utm_content=astradb" target="_blank" rel="noopener noreferrer">Astra DB</a> is a cloud-native database built on Apache Cassandra that is optimized for the cloud. It is a fully managed database-as-a-service that simplifies operations and reduces costs. Astra DB is built on the same technology that powers the largest Cassandra deployments in the world.</p>
<p>In this guide, we will use Astra DB as a vector store to store and retrieve the documents that will be used by the RAG application to generate responses.</p>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</div><div class="admonitionContent_BuS1"><p>This guide assumes that you have Langflow up and running. If you are new to
Langflow, you can check out the <a href="/">Getting Started</a> guide.</p></div></div>
<p>TLDR;</p>
<ul>
<li><a href="https://astra.datastax.com/signup?utm_source=langflow-pre-release&amp;utm_medium=referral&amp;utm_campaign=langflow-announcement&amp;utm_content=create-a-free-astra-db-account" target="_blank" rel="noopener noreferrer">Create a free Astra DB account</a></li>
<li>Create a new database, get a <strong>Token</strong> and the <strong>API Endpoint</strong></li>
<li>Start Langflow and click on the <strong>New Project</strong> button and look for Vector Store RAG. This will create a new project with the necessary components</li>
<li>Import the project into Langflow by dropping it on the Workspace or My Collection page</li>
<li>Update the <strong>Token</strong> and <strong>API Endpoint</strong> in the <strong>Astra DB</strong> components</li>
<li>Update the OpenAI API key in the <strong>OpenAI</strong> components</li>
<li>Run the ingestion flow which is the one that uses the <strong>Astra DB</strong> component</li>
<li>Click on the âš¡ <em>Run</em> button and start interacting with your RAG application</li>
</ul>
<h1>First things first</h1>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="create-an-astra-db-database">Create an Astra DB Database<a class="hash-link" aria-label="Direct link to Create an Astra DB Database" title="Direct link to Create an Astra DB Database" href="/getting-started/rag-with-astradb#create-an-astra-db-database">â€‹</a></h2>
<p>To get started, you will need to <a href="https://astra.datastax.com/signup?utm_source=langflow-pre-release&amp;utm_medium=referral&amp;utm_campaign=langflow-announcement&amp;utm_content=create-an-astradb-database" target="_blank" rel="noopener noreferrer">create an Astra DB database</a>.</p>
<p>Once you have created an account, you will be taken to the Astra DB dashboard. Click on the <strong>Create Database</strong> button.</p>
<div class="zoomable-image" style="width:80%;margin:20px auto;display:flex;justify-content:center"><img src="/img/astra-create-database.png" alt="Docusaurus themed image" class="zoomable-image-inner themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/astra-create-database.png" alt="Docusaurus themed image" class="zoomable-image-inner themedComponent_mlkZ themedComponent--dark_xIcU"></div>
<p>Now you will need to configure your database. Choose the <strong>Serverless (Vector)</strong> deployment type, and pick a Database name, provider and region.</p>
<p>After you have configured your database, click on the <strong>Create Database</strong> button.</p>
<div class="zoomable-image" style="width:80%;margin:20px auto;display:flex;justify-content:center"><img src="/img/astra-configure-deployment.png" alt="Docusaurus themed image" class="zoomable-image-inner themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/astra-configure-deployment.png" alt="Docusaurus themed image" class="zoomable-image-inner themedComponent_mlkZ themedComponent--dark_xIcU"></div>
<p>Once your database is initialized, to the right of the page, you will see the <em>Database Details</em> section which contains a button for you to copy the <strong>API Endpoint</strong> and another to generate a <strong>Token</strong>.</p>
<div class="zoomable-image" style="width:50%;margin:20px auto;display:flex;justify-content:center"><img src="/img/astra-generate-token.png" alt="Docusaurus themed image" class="zoomable-image-inner themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/astra-generate-token.png" alt="Docusaurus themed image" class="zoomable-image-inner themedComponent_mlkZ themedComponent--dark_xIcU"></div>
<p>Now we are all set to start building our RAG application using Astra DB and Langflow.</p>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="open-the-vector-store-rag-project">Open the Vector Store RAG Project<a class="hash-link" aria-label="Direct link to Open the Vector Store RAG Project" title="Direct link to Open the Vector Store RAG Project" href="/getting-started/rag-with-astradb#open-the-vector-store-rag-project">â€‹</a></h2>
<p>To get started, click on the <strong>New Project</strong> button and look for the <strong>Vector Store RAG</strong> project. This will open a starter project with the necessary components to run a RAG application using Astra DB.</p>
<div class="zoomable-image" style="width:80%;margin:20px auto;display:flex;justify-content:center"><img src="/img/drag-and-drop-flow.png" alt="Drag-and-drop" class="zoomable-image-inner themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/drag-and-drop-flow.png" alt="Drag-and-drop" class="zoomable-image-inner themedComponent_mlkZ themedComponent--dark_xIcU"></div>
<p>This project consists of two flows. The simpler one is the <strong>Ingestion Flow</strong> which is responsible for ingesting the documents into the Astra DB database.</p>
<p>Your first step should be to understand what each flow does and how they interact with each other.</p>
<p>The ingestion flow consists of:</p>
<ul>
<li><strong>Files</strong> component that uploads a text file to Langflow</li>
<li><strong>Recursive Character Text Splitter</strong> component that splits the text into smaller chunks</li>
<li><strong>OpenAIEmbeddings</strong> component that generates embeddings for the text chunks</li>
<li><strong>Astra DB</strong> component that stores the text chunks in the Astra DB database</li>
</ul>
<div class="zoomable-image" style="width:80%;margin:20px auto;display:flex;justify-content:center"><img src="/img/astra-ingestion-flow.png" alt="Astra Ingestion" class="zoomable-image-inner themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/astra-ingestion-flow.png" alt="Astra Ingestion" class="zoomable-image-inner themedComponent_mlkZ themedComponent--dark_xIcU"></div>
<p>Now, let&#x27;s update the <strong>Astra DB</strong> and <strong>Astra DB Search</strong> components with the <strong>Token</strong> and <strong>API Endpoint</strong> that we generated earlier, and the OpenAI Embeddings components with your OpenAI API key.</p>
<div class="zoomable-image" style="width:80%;margin:20px auto;display:flex;justify-content:center"><img src="/img/astra-ingestion-fields.png" alt="Docusaurus themed image" class="zoomable-image-inner themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/astra-ingestion-fields.png" alt="Docusaurus themed image" class="zoomable-image-inner themedComponent_mlkZ themedComponent--dark_xIcU"></div>
<p>And run it! This will ingest the Text data from your file into the Astra DB database.</p>
<div class="zoomable-image" style="width:80%;margin:20px auto;display:flex;justify-content:center"><img src="/img/astra-ingestion-run.png" alt="Astra Run" class="zoomable-image-inner themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/astra-ingestion-run.png" alt="Astra Run" class="zoomable-image-inner themedComponent_mlkZ themedComponent--dark_xIcU"></div>
<p>Now, on to the <strong>RAG Flow</strong>. This flow is responsible for generating responses to your queries. It will define all of the steps from getting the User&#x27;s input to generating a response and displaying it in the Playground.</p>
<p>The RAG flow is a bit more complex. It consists of:</p>
<ul>
<li><strong>Chat Input</strong> component that defines where to put the user input coming from the Playground</li>
<li><strong>OpenAI Embeddings</strong> component that generates embeddings from the user input</li>
<li><strong>Astra DB Search</strong> component that retrieves the most relevant Data from the Astra DB database</li>
<li><strong>Text Output</strong> component that turns the Data into Text by concatenating them and also displays it in the Playground<!-- -->
<ul>
<li>One interesting point you&#x27;ll see here is that this component is named <code>Extracted Chunks</code>, and that is how it will appear in the Playground</li>
</ul>
</li>
<li><strong>Prompt</strong> component that takes in the user input and the retrieved Data as text and builds a prompt for the OpenAI model</li>
<li><strong>OpenAI</strong> component that generates a response to the prompt</li>
<li><strong>Chat Output</strong> component that displays the response in the Playground</li>
</ul>
<div class="zoomable-image" style="width:80%;margin:20px auto;display:flex;justify-content:center"><img src="/img/astra-rag-flow.png" alt="Docusaurus themed image" class="zoomable-image-inner themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/astra-rag-flow.png" alt="Docusaurus themed image" class="zoomable-image-inner themedComponent_mlkZ themedComponent--dark_xIcU"></div>
<p>To run it all we have to do is click on the âš¡ <em>Run</em> button and start interacting with your RAG application.</p>
<div class="zoomable-image" style="width:80%;margin:20px auto;display:flex;justify-content:center"><img src="/img/astra-rag-flow-run.png" alt="Astra RAG" class="zoomable-image-inner themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/astra-rag-flow-run.png" alt="Astra RAG" class="zoomable-image-inner themedComponent_mlkZ themedComponent--dark_xIcU"></div>
<p>This opens the Playground where you can chat your data.</p>
<p>Because this flow has a <strong>Chat Input</strong> and a <strong>Text Output</strong> component, the Panel displays a chat input at the bottom and the Extracted Chunks section on the left.</p>
<div class="zoomable-image" style="width:80%;margin:20px auto;display:flex;justify-content:center"><img src="/img/astra-rag-flow-interaction-panel.png" alt="Playground" class="zoomable-image-inner themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/astra-rag-flow-interaction-panel.png" alt="Playground" class="zoomable-image-inner themedComponent_mlkZ themedComponent--dark_xIcU"></div>
<p>Once we interact with it we get a response and the Extracted Chunks section is updated with the retrieved data.</p>
<div class="zoomable-image" style="width:80%;margin:20px auto;display:flex;justify-content:center"><img src="/img/astra-rag-flow-interaction-panel-interaction.png" alt="Astra Playground" class="zoomable-image-inner themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/astra-rag-flow-interaction-panel-interaction.png" alt="Astra Playground" class="zoomable-image-inner themedComponent_mlkZ themedComponent--dark_xIcU"></div>
<p>And that&#x27;s it! You have successfully ran a RAG application using Astra DB and Langflow.</p>
<h1>Conclusion</h1>
<p>In this guide, we have learned how to run a RAG application using Astra DB and Langflow.
We have seen how to create an Astra DB database, import the Astra DB RAG Flows project into Langflow, and run the ingestion and RAG flows.</p></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a class="table-of-contents__link toc-highlight" href="/getting-started/rag-with-astradb#create-an-astra-db-database">Create an Astra DB Database</a></li><li><a class="table-of-contents__link toc-highlight" href="/getting-started/rag-with-astradb#open-the-vector-store-rag-project">Open the Vector Store RAG Project</a></li></ul></div></div></div></div></main></div></div></div><div class="ms-fixed ms-bottom-4 ms-right-8 ms-z-[100] ms-flex ms-flex-col ms-items-end hover:ms-cursor-pointer"><div class="ms-relative ms-mb-4"><div style="background-color:#f6f6f6" class="ms-absolute -ms-bottom-1 ms-right-6 -ms-z-10 ms-h-4 ms-w-4 ms-rotate-45"></div><div style="background-color:#f6f6f6" class="ms-z-10 ms-flex ms-items-center ms-justify-center ms-rounded-lg ms-px-3 ms-py-2"><p style="color:#000000;margin:0" class="ms-text-sm">Hi, how can I help you?</p></div></div><div style="background-color:#f6f6f6" class="ms-flex ms-h-16 ms-w-16 ms-flex-col ms-items-center ms-justify-center ms-self-end ms-rounded-full ms-p-2 ms-transition"><div class="ms-rotate-0 ms-flex ms-h-full ms-w-full ms-transform ms-cursor-pointer ms-items-center ms-justify-center ms-rounded-full ms-transition-all ms-delay-75 ms-duration-100 ms-ease-in-out"><div style="color:#000000;font-size:22px;width:48px;height:48px;margin:0px;padding:0px;display:flex;align-items:center;justify-content:center;text-align:center"><img src="/img/chain.png" style="width:40px"></div></div></div><div></div></div></div>
</body>
</html>