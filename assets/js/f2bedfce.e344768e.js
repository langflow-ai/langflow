"use strict";(globalThis.webpackChunklangflow_docs=globalThis.webpackChunklangflow_docs||[]).push([[8294],{44260:(e,n,t)=>{t.d(n,{A:()=>o});const o=t.p+"assets/images/instana-metrics-dashboard-851f26fbc752c3c8e382f7a2513a7db8.png"},57275:(e,n,t)=>{t.d(n,{A:()=>o});const o=t.p+"assets/images/instana-traces-dashboard-7a5ce59fac982187ad0c164ecc8c1a88.png"},86331:(e,n,t)=>{t.r(n),t.d(n,{CH:()=>d,assets:()=>l,chCodeConfig:()=>h,contentTitle:()=>c,default:()=>g,frontMatter:()=>a,metadata:()=>o,toc:()=>p});const o=JSON.parse('{"id":"Develop/integrations-instana-traceloop","title":"Traceloop","description":"Instrument Langflow with the Traceloop SDK, and export traces and metrics to Instana using OpenTelemetry.","source":"@site/docs/Develop/integrations-instana-traceloop.mdx","sourceDirName":"Develop","slug":"/integrations-instana-traceloop","permalink":"/integrations-instana-traceloop","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"title":"Traceloop","slug":"/integrations-instana-traceloop","description":"Instrument Langflow with the Traceloop SDK, and export traces and metrics to Instana using OpenTelemetry."},"sidebar":"docs","previous":{"title":"Opik","permalink":"/integrations-opik"},"next":{"title":"Telemetry","permalink":"/contributing-telemetry"}}');var r=t(74848),s=t(28453),i=t(24754);const a={title:"Traceloop",slug:"/integrations-instana-traceloop",description:"Instrument Langflow with the Traceloop SDK, and export traces and metrics to Instana using OpenTelemetry."},c=void 0,l={},d={annotations:i.hk,Code:i.Cy},h={staticMediaQuery:"not screen, (max-width: 768px)",lineNumbers:!0,showCopyButton:!0,themeName:"github-dark"},p=[{value:"Prerequisites",id:"prerequisites",level:2},{value:"Configure environment variables",id:"configure-environment-variables",level:2},{value:"Start Langflow with Traceloop environment variables",id:"start-langflow-with-traceloop-environment-variables",level:2},{value:"Verify the integration",id:"verify-the-integration",level:2},{value:"See also",id:"see-also",level:2}];function u(e){const n={a:"a",code:"code",h2:"h2",img:"img",li:"li",ol:"ol",p:"p",strong:"strong",ul:"ul",...(0,s.R)(),...e.components};return d||f("CH",!1),d.Code||f("CH.Code",!0),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("style",{dangerouslySetInnerHTML:{__html:'[data-ch-theme="github-dark"] {  --ch-t-colorScheme: dark;--ch-t-foreground: #c9d1d9;--ch-t-background: #0d1117;--ch-t-lighter-inlineBackground: #0d1117e6;--ch-t-editor-background: #0d1117;--ch-t-editor-foreground: #c9d1d9;--ch-t-editor-lineHighlightBackground: #6e76811a;--ch-t-editor-rangeHighlightBackground: #ffffff0b;--ch-t-editor-infoForeground: #3794FF;--ch-t-editor-selectionBackground: #264F78;--ch-t-focusBorder: #1f6feb;--ch-t-tab-activeBackground: #0d1117;--ch-t-tab-activeForeground: #c9d1d9;--ch-t-tab-inactiveBackground: #010409;--ch-t-tab-inactiveForeground: #8b949e;--ch-t-tab-border: #30363d;--ch-t-tab-activeBorder: #0d1117;--ch-t-editorGroup-border: #30363d;--ch-t-editorGroupHeader-tabsBackground: #010409;--ch-t-editorLineNumber-foreground: #6e7681;--ch-t-input-background: #0d1117;--ch-t-input-foreground: #c9d1d9;--ch-t-input-border: #30363d;--ch-t-icon-foreground: #8b949e;--ch-t-sideBar-background: #010409;--ch-t-sideBar-foreground: #c9d1d9;--ch-t-sideBar-border: #30363d;--ch-t-list-activeSelectionBackground: #6e768166;--ch-t-list-activeSelectionForeground: #c9d1d9;--ch-t-list-hoverBackground: #6e76811a;--ch-t-list-hoverForeground: #c9d1d9; }'}}),"\n",(0,r.jsx)(n.p,{children:"Traceloop SDK is a lightweight instrumentation toolkit designed for LLM applications.\nIt enables developers to automatically capture and export traces, metrics, and key observability signals from their LLM-powered workflows."}),"\n",(0,r.jsx)(n.p,{children:"When combined with Instana, the exported telemetry data from Traceloop provides end-to-end visibility, allowing users to visualize traces, analyze performance bottlenecks, and ensure reliable operation of LLM-driven applications."}),"\n",(0,r.jsx)(n.p,{children:"This guide demonstrates how to integrate the Instana observability platform with your Langflow application using the Traceloop SDK so you can monitor and analyze LLM performance."}),"\n",(0,r.jsx)(n.h2,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Create a ",(0,r.jsx)(n.a,{href:"https://app.traceloop.com/settings/api-key",children:"Traceloop API key"})]}),"\n",(0,r.jsxs)(n.li,{children:["Create an ",(0,r.jsx)(n.a,{href:"https://www.ibm.com/docs/en/instana-observability/1.0.302",children:"Instana endpoint and Instana key"})]}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"/get-started-installation",children:"Install Langflow"})}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"configure-environment-variables",children:"Configure environment variables"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["In the root folder of your Langflow application, edit your existing Langflow ",(0,r.jsx)(n.code,{children:".env"})," file or create a new one."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Enter the following environment variables, and then replace the placeholders with the values for your deployment or requirements:"}),"\n",(0,r.jsx)(d.Code,{codeConfig:h,northPanel:{tabs:[""],active:"",heightRatio:1},files:[{name:"",focus:"",code:{lines:[{tokens:[{content:"TRACELOOP_API_KEY=tl_dummy_1234567890abcdef1234567890abcdef",props:{}}]},{tokens:[{content:"TRACELOOP_BASE_URL=https://otlp-magenta-saas.instana.rocks:4318",props:{}}]},{tokens:[{content:'TRACELOOP_HEADERS="x-instana-key=INSTANA_KEY"',props:{}}]},{tokens:[{content:"OTEL_EXPORTER_OTLP_INSECURE=false",props:{}}]},{tokens:[{content:"TRACELOOP_METRICS_ENDPOINT=HOST:8000",props:{}}]},{tokens:[{content:"TRACELOOP_METRICS_ENABLED=true",props:{}}]},{tokens:[{content:"OTEL_METRIC_EXPORT_INTERVAL=10000",props:{}}]}],lang:"text"},annotations:[]}]}),"\n",(0,r.jsx)(n.p,{children:"Set the necessary values for each environment variable:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"TRACELOOP_API_KEY"})}),": A Traceloop API key to authenticate your application with Traceloop's monitoring service.\nYou can get this from your Traceloop account dashboard."]}),"\n",(0,r.jsx)(n.p,{children:"This integration uses the Traceloop SDK for instrumentation, which requires a Traceloop API key to initialize properly.\nIf you don't have a Traceloop API key, you can proceed with the placeholder API key in the preceding example."}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"TRACELOOP_BASE_URL"})}),": The Instana endpoint URL for telemetry data collection, which is your Instana backend endpoint, such as ",(0,r.jsx)(n.code,{children:"https://otlp-magenta-saas.instana.rocks:4318"}),".\nYou can get this from your Instana configuration or by contacting your Instana administrator."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"TRACELOOP_HEADERS"})}),": Authentication headers for Instana data collection. Set this to ",(0,r.jsx)(n.code,{children:'"x-instana-key=INSTANA_KEY"'}),", replacing ",(0,r.jsx)(n.code,{children:"INSTANA_KEY"})," with the Instana key from your Instana setup."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"OTEL_EXPORTER_OTLP_INSECURE"})}),": Security setting for OpenTelemetry Protocol connections. Set to ",(0,r.jsx)(n.code,{children:"false"})," for secure HTTPS/TLS connections. This is recommended for production Instana SaaS endpoints. Set to ",(0,r.jsx)(n.code,{children:"true"})," for insecure HTTP connections during local development."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"TRACELOOP_METRICS_ENDPOINT"})}),": Separate metrics endpoint configuration, in the form of ",(0,r.jsx)(n.code,{children:"OTEL_DC_LLM_HOST:8000"}),". Typically set to ",(0,r.jsx)(n.code,{children:"host.docker.internal:8000"})," for Docker environments. Adjust the host and port based on your deployment setup."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"TRACELOOP_METRICS_ENABLED"})}),": Boolean to enable metrics collection. Set to ",(0,r.jsx)(n.code,{children:"true"})," to activate metrics gathering."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"OTEL_METRIC_EXPORT_INTERVAL"})}),": Interval in milliseconds for metrics export. Set to ",(0,r.jsx)(n.code,{children:"10000"})," for 10-second export intervals, or adjust based on your monitoring requirements."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["Make sure the OpenTelemetry Data Collector (OTel DC) is running and correctly configured.\nOpen your Collector's ",(0,r.jsx)(n.code,{children:"config.yaml"})," file, enter the following configuration, and then replace the placeholder values with the values from your data collector setup or requirements:"]}),"\n",(0,r.jsx)(d.Code,{codeConfig:h,northPanel:{tabs:[""],active:"",heightRatio:1},files:[{name:"",focus:"",code:{lines:[{tokens:[{content:"llm.application",props:{style:{color:"#7EE787"}}},{content:": ",props:{style:{color:"#C9D1D9"}}},{content:'"LLM_DC"',props:{style:{color:"#A5D6FF"}}}]},{tokens:[{content:"instances",props:{style:{color:"#7EE787"}}},{content:":",props:{style:{color:"#C9D1D9"}}}]},{tokens:[{content:"   -  ",props:{style:{color:"#C9D1D9"}}},{content:"otel.agentless.mode",props:{style:{color:"#7EE787"}}},{content:": ",props:{style:{color:"#C9D1D9"}}},{content:"true",props:{style:{color:"#79C0FF"}}}]},{tokens:[{content:"      # Example endpoint: https://otlp-magenta-saas.instana.rocks:4318",props:{style:{color:"#8B949E"}}}]},{tokens:[{content:"      otel.backend.url",props:{style:{color:"#7EE787"}}},{content:": ",props:{style:{color:"#C9D1D9"}}},{content:'"INSTANA_ENDPOINT"',props:{style:{color:"#A5D6FF"}}}]},{tokens:[{content:"      otel.backend.using.http",props:{style:{color:"#7EE787"}}},{content:": ",props:{style:{color:"#C9D1D9"}}},{content:"false",props:{style:{color:"#79C0FF"}}}]},{tokens:[{content:"      callback.interval",props:{style:{color:"#7EE787"}}},{content:": ",props:{style:{color:"#C9D1D9"}}},{content:"10",props:{style:{color:"#79C0FF"}}}]},{tokens:[{content:"      otel.service.name",props:{style:{color:"#7EE787"}}},{content:": ",props:{style:{color:"#C9D1D9"}}},{content:'"DC1"',props:{style:{color:"#A5D6FF"}}}]},{tokens:[{content:"      otel.service.port",props:{style:{color:"#7EE787"}}},{content:": ",props:{style:{color:"#C9D1D9"}}},{content:"8000",props:{style:{color:"#79C0FF"}}}]},{tokens:[{content:"      currency",props:{style:{color:"#7EE787"}}},{content:": ",props:{style:{color:"#C9D1D9"}}},{content:'"USD"',props:{style:{color:"#A5D6FF"}}}]}],lang:"yaml"},annotations:[]}]}),"\n",(0,r.jsx)(n.p,{children:"This configuration enables the OTel Collector to operate in agentless mode and route telemetry data to your Instana backend with proper service identification and collection intervals for effective monitoring integration."}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"start-langflow-with-traceloop-environment-variables",children:"Start Langflow with Traceloop environment variables"}),"\n",(0,r.jsxs)(n.p,{children:["Launch your Langflow application with your ",(0,r.jsx)(n.code,{children:".env"})," file:"]}),"\n",(0,r.jsx)(d.Code,{codeConfig:h,northPanel:{tabs:[""],active:"",heightRatio:1},files:[{name:"",focus:"",code:{lines:[{tokens:[{content:"uv ",props:{style:{color:"#FFA657"}}},{content:"run langflow run ",props:{style:{color:"#A5D6FF"}}},{content:"--env-file ",props:{style:{color:"#79C0FF"}}},{content:".env",props:{style:{color:"#A5D6FF"}}}]}],lang:"bash"},annotations:[]}]}),"\n",(0,r.jsx)(n.p,{children:"Traceloop automatically begins monitoring and collecting telemetry data from your LLM applications."}),"\n",(0,r.jsx)(n.h2,{id:"verify-the-integration",children:"Verify the integration"}),"\n",(0,r.jsx)(n.p,{children:"To verify that observability is working correctly:"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Run a flow in Langflow to generate traffic."}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["To view traces in Instana, open Instana and click ",(0,r.jsx)(n.strong,{children:"Applications"}),"."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["In ",(0,r.jsx)(n.strong,{children:"Services"}),", search for ",(0,r.jsx)(n.code,{children:"Langflow"}),"."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["Click ",(0,r.jsx)(n.strong,{children:"Langflow"})," to view and analyze the associated calls."]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{alt:"Instana Traces dashboard",src:t(57275).A+"",width:"3424",height:"1756"})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["To view metrics in Instana, open Instana and click ",(0,r.jsx)(n.strong,{children:"Infrastructure"}),"."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["In ",(0,r.jsx)(n.strong,{children:"Analyze Infrastructure"}),", click ",(0,r.jsx)(n.strong,{children:"Otel LLMonitor"}),"."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["To view your Metrics dashboard, click ",(0,r.jsx)(n.code,{children:"LLM:DC1@your_machine_name.local"}),"."]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{alt:"Instana Metrics dashboard",src:t(44260).A+"",width:"3420",height:"1580"})}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"see-also",children:"See also"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://www.traceloop.com/docs/introduction",children:"Traceloop documentation"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://www.ibm.com/docs/en/instana-observability/1.0.300?topic=started-instana-setup",children:"Instana setup documentation"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://www.ibm.com/docs/en/instana-observability/1.0.300?topic=started-install-otel-data-collector-llm-odcl",children:"Otel DC setup documentation"})}),"\n"]})]})}function g(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(u,{...e})}):u(e)}function f(e,n){throw new Error("Expected "+(n?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}}}]);