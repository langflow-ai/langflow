id: urn:agent:genesis:med_extractor:1
name: Medication Extractor
fullyQualifiedName: genesis.autonomize.ai.med_extractor
description: Extracts medication information from clinical text
domain: autonomize.ai
subDomain: clinical-extraction
version: 1.0.0
environment: production
agentOwner: clinical-extraction@autonomize.ai
agentOwnerDisplayName: Clinical Extraction Team
email: clinical-extraction@autonomize.ai
status: ACTIVE
variables:
- name: llm_provider
  type: string
  required: false
  default: Azure OpenAI
  description: LLM provider (AzureOpenAI, OpenAI, Anthropic, etc.)
- name: model_name
  type: string
  required: false
  default: gpt-4
  description: Model name to use for extraction
- name: temperature
  type: float
  required: false
  default: 0.1
  description: Temperature for model generation
- name: rxnorm_confidence_threshold
  type: float
  required: false
  default: 0.85
  description: Confidence threshold for RxNorm extraction
tags:
- UM
- clinical-extraction
- medication
- rxnorm
- reusable
- healthcare
- nlp
kind: Single Agent
agentGoal: Extract all medications with their dosages, frequencies, and routes from clinical text
targetUser: internal
valueGeneration: InsightGeneration
interactionMode: RequestResponse
runMode: RealTime
agencyLevel: ModelDrivenWorkflow
toolsUse: true
learningCapability: None
reusability:
  asTools: true
  standalone: true
  provides:
    toolName: MedicationExtractor
    toolDescription: Extracts medications with dosages and frequencies from clinical text
    inputSchema:
      type: object
      properties:
        clinical_text:
          type: string
          description: Clinical text to extract medications from
      required:
      - clinical_text
    outputSchema:
      type: object
      properties:
        medications:
          type: array
          items:
            type: object
            properties:
              name:
                type: string
              rxnorm_code:
                type: string
              dosage:
                type: string
              frequency:
                type: string
              route:
                type: string
        extraction_confidence:
          type: number
  dependencies: []
sampleInput:
  clinical_text: Patient is currently taking Lisinopril 10mg daily for hypertension, Metformin 500mg twice daily for diabetes,
    and Atorvastatin 20mg at bedtime for cholesterol management.
promptConfiguration:
  basePromptId: medication_extraction_v1
  customPrompt: 'You are a medication extraction specialist. Extract all medications from the clinical text with:

    1. Medication name (generic and brand if available)

    2. Dosage and units

    3. Frequency

    4. Route of administration

    5. RxNorm codes when possible


    Output as structured JSON matching the schema.

    '
  variables:
    output_format: json
    include_confidence: 'true'
components:
- id: input
  name: User Input
  kind: Data
  type: genesis:chat_input
  description: Receive clinical text for medication extraction
  provides:
  - useAs: input
    in: agent-main
    description: Clinical text input to agent
- id: agent-main-prompt
  name: Agent Instructions
  kind: Prompt
  type: genesis:prompt_template
  description: Prompt template for agent instructions
  config:
    saved_prompt: med_extractor_prompt_v1
    template: "You are a medication extraction specialist. Extract all medications from the clinical text with:\n1. Medication\
      \ name (generic and brand if available)\n2. Dosage and units\n3. Frequency\n4. Route of administration\n5. RxNorm codes\
      \ when possible\n\nUse the RxNorm tool when available to get accurate medication codes.\n\nOutput as structured JSON\
      \ matching this schema:\n{\n  \"medications\": [\n    {\n      \"name\": \"medication name\",\n      \"dosage\": \"\
      dosage with units\",\n      \"frequency\": \"how often\",\n      \"route\": \"administration route\",\n      \"rxnorm_code\"\
      : \"RxNorm code if found\"\n    }\n  ],\n  \"extraction_confidence\": 0.95\n}"
  provides:
  - useAs: system_prompt
    in: agent-main
    description: System prompt for the agent
- id: agent-main
  name: Medication Extraction Agent
  kind: Agent
  type: genesis:agent
  description: Agent specialized in medication extraction
  config:
    agent_llm: Azure OpenAI
    model_name: gpt-4
    temperature: 0.1
    max_tokens: 2000
    handle_parsing_errors: true
    max_iterations: 10
    verbose: true
  provides:
  - useAs: input
    in: output-formatter
    description: Extracted medications to formatter
- id: rxnorm-model
  name: RxNorm Medication Extractor
  kind: Model
  type: genesis:rxnorm
  description: Extract medications with RxNorm codes
  asTools: true
  modelEndpoint: RXNORM_MODEL
  config:
    confidence_threshold: 0.85
    return_alternatives: true
  provides:
  - useAs: tools
    in: agent-main
    description: RxNorm extraction tool for agent
- id: output-formatter
  name: Medication Results
  kind: Data
  type: genesis:chat_output
  description: Display extracted medications
  config:
    should_store_message: true
outputs:
- medications_list
- extraction_confidence
- rxnorm_codes
kpis:
- name: Extraction Accuracy
  category: Quality
  valueType: percentage
  target: 95
  unit: '%'
  description: Percentage of correctly extracted medications
- name: Processing Time
  category: Performance
  valueType: numeric
  target: 2000
  unit: ms
  description: Average time to extract medications from text
- name: Medications Per Document
  category: Productivity
  valueType: numeric
  target: 5
  unit: medications
  description: Average number of medications extracted per document
- name: RxNorm Code Match Rate
  category: Quality
  valueType: percentage
  target: 90
  unit: '%'
  description: Percentage of medications matched to RxNorm codes
securityInfo:
  visibility: Private
  confidentiality: High
  gdprSensitive: false
