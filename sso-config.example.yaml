# SSO Configuration Example
# Copy this file to sso-config.yaml and fill in your provider details

# ============================================================================
# OIDC (OpenID Connect) Configuration
# Supported providers: Google, Okta, Azure AD, Auth0, IBM W3ID, etc.
# ============================================================================

provider: oidc
enabled: true

oidc:
  # Human-readable provider name (displayed in UI)
  provider_name: "Google"
  
  # OAuth 2.0 Client Credentials (from your IdP)
  client_id: "your-client-id.apps.googleusercontent.com"
  client_secret: "your-client-secret"
  
  # OIDC Discovery URL (well-known configuration endpoint)
  # Google: https://accounts.google.com/.well-known/openid-configuration
  # Okta: https://your-domain.okta.com/.well-known/openid-configuration
  # Azure AD: https://login.microsoftonline.com/{tenant-id}/v2.0/.well-known/openid-configuration
  # IBM W3ID: https://w3id.sso.ibm.com/isam/oidc/endpoint/default/.well-known/openid-configuration
  discovery_url: "https://accounts.google.com/.well-known/openid-configuration"
  
  # OAuth Callback URL (must match your IdP configuration)
  # For local development: http://localhost:7860/api/v1/sso/callback
  # For production: https://your-domain.com/api/v1/sso/callback
  redirect_uri: "http://localhost:7860/api/v1/sso/callback"
  
  # OAuth Scopes to request
  scopes:
    - openid
    - email
    - profile
  
  # JWT Claim Mapping (customize based on your IdP)
  email_claim: "email"           # Claim containing user email
  username_claim: "email"        # Claim containing username (use "preferred_username" if available)
  user_id_claim: "sub"           # Claim containing unique user ID
  
  # Optional: Override issuer for token validation
  issuer: "https://accounts.google.com"

# ============================================================================
# SAML 2.0 Configuration (Coming Soon)
# Supported providers: Okta, Azure AD, OneLogin, Ping Identity, etc.
# ============================================================================

# provider: saml
# enabled: true
# 
# saml:
#   provider_name: "Okta"
#   entity_id: "http://www.okta.com/exk..."
#   sso_url: "https://example.okta.com/app/example/exk.../sso/saml"
#   x509_cert: |
#     -----BEGIN CERTIFICATE-----
#     MIIDpDCCAoygAwIBAgIGAXoTp...
#     -----END CERTIFICATE-----
#   
#   # Service Provider (Langflow) Configuration
#   sp_entity_id: "https://langflow.example.com"
#   acs_url: "https://langflow.example.com/api/v1/auth/saml/acs"
#   
#   # SAML Attribute Mapping
#   email_attribute: "email"
#   username_attribute: "username"
#   user_id_attribute: "nameID"

# ============================================================================
# LDAP/Active Directory Configuration (Coming Soon)
# For on-premises deployments with direct AD integration
# ============================================================================

# provider: ldap
# enabled: true
# 
# ldap:
#   provider_name: "Active Directory"
#   server_uri: "ldaps://ad.example.com:636"
#   bind_dn: "CN=Service Account,OU=Users,DC=example,DC=com"
#   bind_password: "your-bind-password"
#   
#   # User Search Configuration
#   user_search_base: "OU=Users,DC=example,DC=com"
#   user_search_filter: "(sAMAccountName={username})"
#   
#   # LDAP Attribute Mapping
#   email_attribute: "mail"
#   username_attribute: "sAMAccountName"
#   user_id_attribute: "objectGUID"
#   
#   # Security Settings
#   use_ssl: true
#   
#   # Optional: Group Synchronization
#   group_search_base: "OU=Groups,DC=example,DC=com"
#   group_search_filter: "(member={user_dn})"

# ============================================================================
# Environment Variables (Alternative Configuration Method)
# ============================================================================
# You can also configure SSO using environment variables:
#
# LANGFLOW_SSO_ENABLED=true
# LANGFLOW_SSO_PROVIDER=oidc
# LANGFLOW_SSO_CONFIG_FILE=./sso-config.yaml
#
# See .env.example for more details