name: ðŸ§ª test invoke ephemeral runner
on:
  push: 
    branches: [test-ephemeral-runner]

jobs:
  show-runner-info:
    runs-on: 
      labels: ["self-hosted", "linux", "ARM64", "langflow-ai-arm64-40gb-ephemeral"]        
    steps:

      - name: Print runner labels from context
        run: | 
          echo "Runner labels: ${{ toJson(runner.labels) }}" >> "$GITHUB_STEP_SUMMARY"
          
      - name: Show Runner Info in Summary
        run: |
          {
            echo "## ðŸ–¥ï¸ Self-Hosted Runner Info"
            echo "---------- "
            echo "GITHUB_RUNNER_NAME   : '${{ runner.name }}'"
            echo "GITHUB_RUNNER_OS     : '${{ runner.os }}'"
            echo "runner.labels raw    : '${{ runner.labels }}'"
            echo "runner.labels json   : '${{ toJson(runner.labels) }}'"
            echo "ENV RUNNER_LABELS    : '$RUNNER_LABELS'"
            echo "ENV RUNNER_NAME      : '$RUNNER_NAME'"            
            echo "----------"
            echo "**Hostname:** $(hostname)"
            echo "**Machine:** $(uname -a)"
            echo "**GitHub Workspace:** $GITHUB_WORKSPACE"
            echo "**Runner Temp Dir:** $RUNNER_TEMP"
            echo "**Runner Tool Cache:** $RUNNER_TOOL_CACHE"
            echo ""
            echo "### Environment Variables"
            echo '```'
            printenv | sort
            echo '```'
          } >> "$GITHUB_STEP_SUMMARY"
